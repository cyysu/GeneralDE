<?xml version="1.0" encoding="GBK" standalone="yes"?>
<metalib tagsetversion="1" name="" version="1">
    <include name="svr_match_data" file="svr_match_data.xml"/>

    <macrosgroup name="svr_match_error">
        <macro name="SVR_MATCH_ERROR_ROOM_TYPE_UNKNOWN" value="1"/>
        <macro name="SVR_MATCH_ERROR_ROOM_TYPE_MISMATCH" value="2"/>
        <macro name="SVR_MATCH_ERROR_USER_NOT_EXIST" value="3"/>
        <macro name="SVR_MATCH_ERROR_USER_DATA_OVERFLOW" value="4"/>
        <macro name="SVR_MATCH_ERROR_INTERNAL" value="-1"/>
    </macrosgroup>

    <!--  ============ 协议定义 ========== -->

    <!--     进入匹配房间 -->
    <struct name="svr_match_req_join" version="1">
        <entry name="match_room_id" type="uint64" id="1"/>
        <entry name="match_room_type" type="uint16" id="2"/>
        <entry name="user" type="svr_match_matching_user" id="3"/>
    </struct>

    <struct name="svr_match_res_join" version="1">
        <entry name="result" type="int16" id="1" bindmacrosgroup="svr_match_error"/>
    </struct>

    <!--     离开匹配房间 -->
    <struct name="svr_match_req_leave" version="1">
        <entry name="match_room_id" type="uint64" id="1"/>
        <entry name="user_id" type="uint64" id="2"/>
    </struct>

    <struct name="svr_match_res_leave" version="1">
        <entry name="result" type="int16" id="1" bindmacrosgroup="svr_match_error"/>
    </struct>

    <!--  ============ 通知定义 ========== -->

    <!--     通知人员加入匹配 -->
    <struct name="svr_match_notify_join" version="1">
        <entry name="match_room_id" type="uint64" id="1"/>
        <entry name="user_id" type="uint64" id="2"/>
        <entry name="join_user" type="svr_match_matching_user" id="3"/>
    </struct>

    <!--     通知人员加入匹配 -->
    <struct name="svr_match_notify_leave" version="1">
        <entry name="match_room_id" type="uint64" id="1"/>
        <entry name="user_id" type="uint64" id="2"/>
        <entry name="leave_user_id" type="uint64" id="3"/>
    </struct>

    <!--  =========== 整体协议定义 ========== -->
    <macrosgroup name="SVR_MATCH_CMD_ID">
        <macro name="SVR_MATCH_CMD_REQ_JOIN" value="1"/>
        <macro name="SVR_MATCH_CMD_RES_JOIN" value="2"/>

        <macro name="SVR_MATCH_CMD_REQ_LEAVE" value="3"/>
        <macro name="SVR_MATCH_CMD_RES_LEAVE" value="4"/>

        <macro name="SVR_MATCH_CMD_NOTIFY_JOIN" value="11"/>
        <macro name="SVR_MATCH_CMD_NOTIFY_LEAVE" value="12"/>

    </macrosgroup>

    <union name="svr_match_pkg_data" version="1" desc="">
        <entry name="svr_match_req_join" type="svr_match_req_join" id="SVR_MATCH_CMD_REQ_JOIN"/>
        <entry name="svr_match_res_join" type="svr_match_res_join" id="SVR_MATCH_CMD_RES_JOIN"/>

        <entry name="svr_match_req_leave" type="svr_match_req_leave" id="SVR_MATCH_CMD_REQ_LEAVE"/>
        <entry name="svr_match_res_leave" type="svr_match_res_leave" id="SVR_MATCH_CMD_RES_LEAVE"/>

        <entry name="svr_match_notify_join" type="svr_match_notify_join" id="SVR_MATCH_CMD_NOTIFY_JOIN"/>
        <entry name="svr_match_notify_leave" type="svr_match_notify_leave" id="SVR_MATCH_CMD_NOTIFY_LEAVE"/>
    </union>

    <struct name="svr_match_pkg" version="1">
        <entry name="cmd" type="uint32" id="1"/>
        <entry name="data" type="svr_match_pkg_data" id="3" select="cmd"/>
    </struct>

</metalib>
